(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{29:function(e,t,n){},31:function(e,t,n){},50:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(19),s=n.n(r),o=(n(29),n(5)),i=n.n(o),u=n(9),j=n(3),l=(n(31),n(2)),b=n(14),d=n(13),O=n(0);function f(e){var t=e.formData,n=e.setFormData,a=e.name,c=e.defVal,r=e.placeHolder,s=e.type;return Object(O.jsx)("input",{type:s,onChange:function(e){var a=e.target.name,c=e.target.value;n(Object(d.a)(Object(d.a)({},t),{},Object(b.a)({},a,c)))},placeholder:r,name:a,defaultValue:c,required:!0})}function h(e){var t=e.text,n=e.click;return Object(O.jsx)("button",{onClick:n,children:t})}var p=n(20),m="https://todokev.herokuapp.com",x=function(){return localStorage.getItem("token")},v=function e(){Object(p.a)(this,e)};function g(e){var t=e.setNewUser,n=e.setCreateUser,c=Object(a.useState)(!1),r=Object(j.a)(c,2),s=r[0],o=r[1],l=Object(a.useState)({userName:"",password:""}),b=Object(j.a)(l,2),d=b[0],p=b[1],m=function(){var e=Object(u.a)(i.a.mark((function e(a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,v.createUserFetch(d);case 3:e.sent.ok?(n(!1),t(!0)):o(!0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("form",{className:"inputForm",onSubmit:m,children:[Object(O.jsx)(f,{formData:d,setFormData:p,name:"userName",placeHolder:"new username"}),Object(O.jsx)(f,{formData:d,setFormData:p,name:"password",placeHolder:"new password",type:"password"}),Object(O.jsx)(h,{text:"signup"})]}),s&&Object(O.jsx)("p",{children:"Username is taken"})]})}function k(e){var t=e.setNewUser,n=e.setCreateUser,c=Object(a.useState)(!1),r=Object(j.a)(c,2),s=r[0],o=r[1],b=Object(l.g)(),d=Object(a.useState)({userName:"",password:""}),p=Object(j.a)(d,2),m=p[0],x=p[1],g=function(){var e=Object(u.a)(i.a.mark((function e(a){var c,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),n(!1),t(!1),e.next=5,v.loginFetch(m);case 5:return c=e.sent,e.next=8,c.json();case 8:r=e.sent,c.ok?(localStorage.setItem("token",r),b.push("/home")):o(!0);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsxs)(O.Fragment,{children:[s&&Object(O.jsx)("p",{children:"WRONG PASSWORD OR EMAIL"}),Object(O.jsxs)("form",{className:"inputForm",onSubmit:g,children:[Object(O.jsx)(f,{formData:m,setFormData:x,name:"userName",placeHolder:"username"}),Object(O.jsx)(f,{formData:m,setFormData:x,name:"password",placeHolder:"password",type:"password"}),Object(O.jsx)(h,{text:"login"})]})]})}function F(){var e=localStorage.getItem("token"),t=Object(l.g)(),n=Object(a.useState)(!1),c=Object(j.a)(n,2),r=c[0],s=c[1],o=Object(a.useState)(!1),i=Object(j.a)(o,2),u=i[0],b=i[1];Object(a.useEffect)((function(){e&&t.push("/home")}),[e,t,r]);return Object(O.jsxs)("div",{className:"login-page",children:[u&&"Ny anv\xe4ndare registrerad!",r?Object(O.jsx)(g,{setNewUser:b,setCreateUser:s}):Object(O.jsx)(k,{setNewUser:b,setCreateUser:s}),Object(O.jsx)("p",{className:"create-text",onClick:function(){s(!r),b(!1)},children:r?"back to login":"create user"})]})}v.loginFetch=function(e){return fetch("".concat(m,"/user/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})},v.createUserFetch=function(e){return fetch("".concat(m,"/user"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})},v.getUserFetch=function(){return fetch("".concat(m,"/user"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"".concat(x())}})},v.verifyTokenAuth=function(e){return fetch("".concat(m,"/auth"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"".concat(e)}})},v.getTasksFetch=function(){return fetch("".concat(m,"/task"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"".concat(x())}})},v.editTasksFetch=function(e,t){return fetch("".concat(m,"/task/").concat(t),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"".concat(x())},body:JSON.stringify(e)})},v.deleteTaskFetch=function(e){return fetch("".concat(m,"/task/").concat(e),{method:"Delete",headers:{"Content-Type":"application/json",Authorization:"".concat(x())}})},v.createTasksFetch=function(e){return fetch("".concat(m,"/task"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"".concat(x())},body:JSON.stringify(e)})};var C=Object(a.createContext)(),D=n(23);function S(){var e=Object(a.useContext)(C).setUser,t=Object(l.g)();return Object(O.jsx)("button",{className:"logout",onClick:function(){localStorage.clear(),e(),t.push("/")},children:"logout"})}function N(e){var t=e.user;return Object(O.jsxs)("div",{className:"header",children:[Object(O.jsx)("h1",{children:"TODOODODO"}),Object(O.jsxs)("div",{className:"user",children:[Object(O.jsxs)("p",{children:["Welcome ",t.user]}),Object(O.jsx)(S,{})]})]})}function y(e){var t=e.setEdit;return Object(O.jsx)("button",{className:"logout",onClick:t,children:"edit"})}function w(e){var t=e.task,n=e.setCloseAll,c=Object(a.useContext)(C).getUserData,r=function(){var e=Object(u.a)(i.a.mark((function e(a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,v.deleteTaskFetch(t._id);case 3:e.sent.ok&&(n(!0),c());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsx)("form",{onSubmit:r,children:Object(O.jsx)(h,{text:"delete"})})}function T(){return Object(O.jsx)("button",{className:"logout",children:"save changes"})}function U(e){var t=e.task,n=e.setEdit,c=e.edit,r=Object(a.useContext)(C).getUserData,s=Object(a.useState)({userName:"",password:""}),o=Object(j.a)(s,2),l=o[0],b=o[1],d=function(){var e=Object(u.a)(i.a.mark((function e(a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,v.editTasksFetch(l,t._id);case 3:e.sent.ok&&(n(!c),r());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsxs)("form",{className:"editform",onSubmit:d,children:[Object(O.jsxs)("div",{className:"inputfield",children:[Object(O.jsx)(f,{formData:l,setFormData:b,name:"task",defVal:t.task}),Object(O.jsx)(f,{formData:l,setFormData:b,name:"description",defVal:t.description})]}),Object(O.jsx)(T,{})]})}function A(e){var t=e.task,n=e.setCloseAll,c=e.closeAll,r=Object(a.useState)(!1),s=Object(j.a)(r,2),o=s[0],i=s[1],u=Object(a.useState)(!1),l=Object(j.a)(u,2),b=l[0],d=l[1];Object(a.useEffect)((function(){c&&(d(!1),n(!1))}),[b,n,c]);var f=function(){d(!b)};return Object(O.jsx)(O.Fragment,{children:b?Object(O.jsx)(U,{fetch:"edit",edit:b,task:t,setEdit:d}):Object(O.jsxs)("div",{className:"task-card",children:[Object(O.jsx)("h1",{onClick:function(){i(!o)},children:t.task}),o&&Object(O.jsxs)("div",{className:"task-card-content",children:[Object(O.jsx)("p",{children:t.description}),Object(O.jsx)("p",{children:t.date}),Object(O.jsx)("div",{onClick:f}),Object(O.jsxs)("div",{className:"taskCard-bottom",children:[Object(O.jsx)(y,{onClick:f,setEdit:d}),Object(O.jsx)(w,{task:t,setCloseAll:n})]})]})]})})}function E(){var e=Object(a.useContext)(C).getUserData,t=Object(a.useState)({userName:"",password:""}),n=Object(j.a)(t,2),c=n[0],r=n[1],s=function(){var t=Object(u.a)(i.a.mark((function t(n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,v.createTasksFetch(c);case 3:t.sent.ok&&e();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(O.jsxs)("form",{className:"inputForm",onSubmit:s,children:[Object(O.jsx)(f,{formData:c,setFormData:r,name:"task",placeHolder:"start typing..."}),Object(O.jsx)(f,{formData:c,setFormData:r,name:"description",placeHolder:"description",type:"text"}),Object(O.jsx)(h,{text:"add"})]})}function P(){var e=Object(a.useContext)(C),t=e.getUserData,n=e.user,c=Object(a.useState)(!1),r=Object(j.a)(c,2),s=r[0],o=r[1];return Object(a.useEffect)((function(){!n&&t()}),[n,s,t]),Object(O.jsx)(O.Fragment,{children:n?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(N,{user:n}),Object(O.jsx)(E,{fetch:"create"}),Object(O.jsx)("div",{className:"hompage-content",children:n.tasks.map((function(e,t){return Object(O.jsx)(A,{task:e,setCloseAll:o,closeAll:s},t)}))})]}):Object(O.jsx)(D.Puff,{stroke:"#000000",className:"loading"})})}var H=n(24);function I(e){var t=localStorage.getItem("token");return Object(O.jsx)(O.Fragment,{children:function(){try{if(Object(H.a)(t))return!0}catch(e){return localStorage.clear(),!1}}()?Object(O.jsx)(l.b,Object(d.a)({},e)):Object(O.jsx)(l.a,{to:{pathname:"/"}})})}var z=function(){var e=Object(a.useState)(),t=Object(j.a)(e,2),n=t[0],c=t[1],r=function(){var e=Object(u.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.getUserFetch();case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,c(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(O.jsx)(C.Provider,{value:{user:n,setUser:c,getUserData:r},children:Object(O.jsxs)(l.d,{children:[Object(O.jsx)(I,{path:"/home",component:P}),Object(O.jsx)(l.b,{exact:!0,path:"/",component:F})]})})},J=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,51)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))},G=n(11);s.a.render(Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(G.a,{children:Object(O.jsx)(z,{})})}),document.getElementById("root")),J()}},[[50,1,2]]]);
//# sourceMappingURL=main.41b9bda0.chunk.js.map